<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../WEB-INF/templateRNPN.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="titulo">
        Lista de ciudadanos
    </ui:define>

    <ui:define name="content">
        <h1 class="text-center" style="margin-top: -5%;">Lista de ciudadanos</h1>

        <h:form><br></br>
            <h:link outcome="ingresarCiudadano" value="Ingresar ciudadano" class="btn btn-default"/><br></br><br></br>
            <h:dataTable value="#{ciudadanosBean.listaCiudadanos}" var="item" class="table table-bordered" id="tabla">
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Dui"/>
                    </f:facet>
                    <h:outputText value="#{item.duiCiudadano}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Nombres"/>
                    </f:facet>
                    <h:outputText value="#{item.nombresCiudadano}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Apellidos"/>
                    </f:facet>
                    <h:outputText value="#{item.apellidosCiudadano}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Fecha de nacimiento"/>
                    </f:facet>
                    <h:outputText value="#{item.fechaNacimiento}">
                        <f:convertDateTime pattern="dd/MM/yyyy" />
                    </h:outputText>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Dirección"/>
                    </f:facet>
                    <h:outputText value="#{item.direccion}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Fotogragia"/>
                    </f:facet>
                    <h:outputText value="#{item.urlFoto}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Centro de votación"/>
                    </f:facet>
                    <h:outputText value="#{item.idCentroVotacion.centroVotacion}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Operaciones"/>
                    </f:facet>
                    <h:commandLink class="btn btn-info" action="#{ciudadanosBean.obtenerCiudadano()}">
                        <span class="glyphicon glyphicon-edit"></span> 
                        <f:param name="codigo" value="#{item.duiCiudadano}" />
                    </h:commandLink>    
                    <h:commandLink class="btn btn-danger" style="margin-left: 5px;" onclick="return confirmar();" action="#{ciudadanosBean.eliminarCiudadano()}">
                        <span class="glyphicon glyphicon-trash"></span>
                        <f:param name="codigo" value="#{item.duiCiudadano}" />
                    </h:commandLink>
                </h:column>
            </h:dataTable>
        </h:form>
        <script>
            $(document).ready(function () {
                $('#tabla').dataTable();
            });
            
            function confirmar() {
                return confirm("¿Realmente deseas eliminar el registro de este ciudadano?");
            }
        </script>
    </ui:define>

</ui:composition>
