<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <!-- css -->
        <link href="../resources/css/bootstrap.min.css" rel="stylesheet" />
        <link href="css/fancybox/jquery.fancybox.css" rel="stylesheet"/> 
        <link href="css/flexslider.css" rel="stylesheet" /> 
        <link href="css/style.css" rel="stylesheet" />
        <link href="css/dataTables.bootstrap.min.css" rel="stylesheet" type="text/css"/>
        <script src="js/jquery-1.12.0.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script src="js/alertify.js"></script>
        <script src="js/jquery.dataTables.min.js"></script>
        <script src="js/dataTables.bootstrap.min.js"></script>
        <title>Administrador General</title>
    </h:head>
    <h:body>
        <!-- start header -->
        <header>
            <div class="navbar navbar-default navbar-static-top">
                <div class="container">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a class="navbar-brand" href="#"><img src="img/logo.png"/></a>
                    </div>
                    <div class="navbar-collapse collapse ">
                        <ul class="nav navbar-nav">
                            <li class="active"><h:link outcome="/administradorGeneral/index">Inicio</h:link></li> 
                            <li class="dropdown">
                                <a href="#" data-toggle="dropdown">Elecciones <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    <li><h:link outcome="/administradorGeneral/nuevaEleccion">Nueva Elección</h:link></li>
                                    <li><h:link outcome="/administradorGeneral/listaJRV">Ver JRVs</h:link></li>
                                    <li><h:link outcome="/administradorGeneral/listaElecciones">Gestionar Elecciones</h:link></li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" data-toggle="dropdown">Candidatos <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    <li><h:link outcome="/administradorGeneral/nuevoCandidatoPresidencial">Nuevo Candidato Presidencial</h:link></li>
                                    <li><h:link outcome="/administradorGeneral/listaCandidatos">Lista Candidatos Presidenciales</h:link></li>
                                    <li><h:link outcome="/administradorGeneral/listaCandidatosConsejoMunicipal">Lista Candidatos Municipales</h:link></li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" data-toggle="dropdown">Partidos Políticos <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    <li><h:link outcome="/administradorGeneral/nuevoPartido">Nuevo Partido Político</h:link></li>
                                    <li><h:link outcome="/administradorGeneral/listaPartidos">Gestionar Partidos Políticos</h:link></li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <h:link outcome="/administradorGeneral/panelAdministracionUsuarios">Usuarios</h:link>
                            </li>
                            <li class="dropdown">
                                <a href="#" data-toggle="dropdown">Región <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    <li><h:link outcome="/administradorGeneral/nuevoDepartamento">Nuevo Departamento</h:link></li>
                                    <li><h:link outcome="/administradorGeneral/listaDepartamentos">Gestionar Departamentos</h:link></li>
                                    <li><h:link outcome="/administradorGeneral/nuevoMunicipio">Nuevo Municipio</h:link></li>
                                    <li><h:link outcome="/administradorGeneral/listaMunicipios">Gestionar Municipios</h:link></li>
                                    <li><h:link outcome="/administradorGeneral/listaCentrosVotaciones">Listado de Centros de Votación</h:link></li>
                                </ul>
                            </li>  
                            <li class="dropdown">
                                <a href="#" class="fa fa-user" data-toggle="dropdown"> <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    <li><a href="about.html">Cambiar Contraseña</a></li>
                                    <li><a href="#">Cerrar Sesión</a></li>
                                </ul>
                            </li> 
                        </ul>
                    </div>
                </div>
            </div>
        </header>
        <!-- end header -->



        <!-- Contenido -->
        <section id="content-3-10" class="content-block data-section nopad content-3-10">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-12 content">
                        <div class="editContent">
                            <h3>Lista de Elecciones</h3>
                        </div>
                        <h:link outcome="/administradorGeneral/nuevaEleccion" style="margin-bottom: 10px;" value="Nueva Elección" styleClass="btn btn-info"/>
                        <h:form prependId="false">
                            <h:dataTable id="tabla" styleClass="table table-bordered" value="#{eleccionesBean.listaElecciones}" var="item">
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="ID Eleccion"/>
                                    </f:facet>
                                    <h:outputText value="#{item.idEleccion}"/>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Descripción"/>
                                    </f:facet>
                                    <h:outputText value="#{item.descripcionEleccion}"/>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Fecha Inicio"/>
                                    </f:facet>
                                    <h:outputText value="#{item.fechaInicio}">
                                        <f:convertDateTime pattern="dd/MM/yyyy" />
                                    </h:outputText>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Fecha Registro"/>
                                    </f:facet>
                                    <h:outputText value="#{item.fechaRegistro}">
                                        <f:convertDateTime pattern="dd/MM/yyyy" />
                                    </h:outputText>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Fecha Fin Registro"/>
                                    </f:facet>
                                    <h:outputText value="#{item.fechaFinRegistro}">
                                        <f:convertDateTime pattern="dd/MM/yyyy" />
                                    </h:outputText>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Tipo de Elección"/>
                                    </f:facet>
                                    <h:outputText value="#{item.idTipoEleccion.tipoEleccion}"/>
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Operaciones"/>
                                    </f:facet>
                                    <h:commandLink rendered="#{item.fechaInicio.after(eleccionesBean.fechaActual) and item.jrvEntityList.size()==0}" action="#{eleccionesBean.generarJRVs()}" styleClass="btn btn-primary">
                                        Crear JRVs
                                        <f:param name="codigo" value="#{item.idEleccion}" />
                                    </h:commandLink>
                                </h:column>
                            </h:dataTable>
                        </h:form>
                        <!--Accesos-->

                        <!--Fin Accesos-->
                    </div>
                </div><!-- /.row-->
            </div><!-- /.container -->
        </section>
        <!-- FIN Contenido -->



        <!--Footer-->

        <div id="sub-footer">
            <div class="container">
                <div class="row">
                    <center><img src="img/logoInvert.png"/></center>
                    <center>Administración de Votaciones</center>
                </div>
            </div>
        </div>
        <script>
            $(document).ready(function () {
                $('#tabla').dataTable();
            });
        </script>
        <h:outputScript rendered="#{not empty flash.exito}">
            alertify.success('#{flash.exito}');
        </h:outputScript>

        <h:outputScript rendered="#{not empty flash.fracaso}">
            alertify.error('#{flash.fracaso}');
        </h:outputScript>
        <!--Fin Footer-->
    </h:body>
</html>

